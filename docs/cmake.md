```
category: Tool
tool: CMake
contributors:
    - ["Bruno Alano", "https://github.com/brunoalano"]
filename: Learn_CMake.md
```

CMake is a cross-platform, open-source build system. Its purpose is to facilitate testing, building, and packaging of software from its source code.

CMake aims to tackle the challenge of managing Makefiles and Autoconfigure across various platforms. The same Makefile can function differently on different systems due to varying make interpreters that have diverse commands. CMake simplifies the process of incorporating third-party libraries, making it more user-friendly.

As an adaptable open-source build management system, CMake handles the build process across different operating systems and compiler environments. It works hand in hand with the native build environment as opposed to swapping it. Simple configuration files (designated as CMakeLists.txt) that are located in each source directory, are leveraged to generate customary build files (like makefiles on Unix or projects/workspaces in Windows MSVC) in a manner native to the environment.

Here are some basic commands and their descriptions in CMake:

```cmake
# This is a comment in CMake. To run our code, please perform the following commands:
#  - mkdir build && cd build
#  - cmake ..
#  - make
# The above steps indicate the best practice to compile into a subdir.
# The second line instructs CMake to generate a new Makefile unique to the OS.
# Ultimately, execute the native Make command.

#------------------------------------------------------------------------------
# Basics
#------------------------------------------------------------------------------
#
# CMake files should be named as "CMakeLists.txt".

# Setup the minimum version of CMake required to generate the Makefile
cmake_minimum_required (VERSION 2.8)

# Raises a FATAL_ERROR if version < 2.8
cmake_minimum_required (VERSION 2.8 FATAL_ERROR)

# Define the name of our project. This also affects some directories
# naming convention generated by CMake. The language of code can be sent
# as the second parameter
project (LearnCMake C)

# Sets the project source and binary directory (conventional setup)
set( LEARN_CMAKE_SOURCE_DIR ${CMAKE_CURRENT_SOURCE_DIR} )
set( LEARN_CMAKE_BINARY_DIR ${CMAKE_CURRENT_BINARY_DIR} )

# Defines the current version of our code in the build system
# using a semantic versioning (semver) style
set (LEARN_CMAKE_VERSION_MAJOR 1)
set (LEARN_CMAKE_VERSION_MINOR 0)
set (LEARN_CMAKE_VERSION_PATCH 0)

# Passes the variables (version number) to the source code header
configure_file (
  "${PROJECT_SOURCE_DIR}/TutorialConfig.h.in"
  "${PROJECT_BINARY_DIR}/TutorialConfig.h"
)

# For GCC, this command invokes the "-I"
include_directories( include )

# Sets the location of the installed additional libraries. Note: provide includes
# path here, subsequent checks will resolve everything else.
set( CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_SOURCE_DIR}/CMake/modules/" )

# Set up conditions, messages, loops, logic operations, lists and finally compile and link the libraries.
# For detailed examples of these, refer to the initial code block.

# Condition setup specific to a compiler example (gcc ; g++)
if ( "${CMAKE_C_COMPILER_ID}" STREQUAL "GNU" )
  message( STATUS "Setting the flags for ${CMAKE_C_COMPILER_ID} compiler" )
  add_definitions( --std=c99 )
endif()

# Check for OS
if( UNIX )
    set( LEARN_CMAKE_DEFINITIONS
        "${LEARN_CMAKE_DEFINITIONS} -Wall -Wextra -Werror -Wno-deprecated-declarations -Wno-unused-parameter -Wno-comment" )
endif()
```

### Additional Resources

1. [CMake tutorial](https://cmake.org/cmake-tutorial/)
2. [CMake documentation](https://cmake.org/documentation/)
3. [Mastering CMake Book](http://amzn.com/1930934319/)
4. [An Introduction to Modern CMake](https://cliutils.gitlab.io/modern-cmake/)

<br>
